# 数据库项目设计文档 (一)：需求分析报告 (MVP版)

## 1. 项目背景与概述
**项目名称**：MediArchive Pro - 个人多媒体资产管理系统 (MVP)
**项目背景**：
在多设备环境下，个人拥有的数字资产（本地文件、网络资源）往往分散在不同的设备（手机、笔记本、台式机）和平台（B站、网页）中。现有的管理工具要么过于复杂（企业级），要么功能单一（仅本地文件管理）。
**核心目标**：
构建一个**“轻量级、实用至上”**的个人媒体资产管理系统。采用**MVP（最小可行性产品）**开发策略，优先解决**“单用户、多设备”**场景下的资源统一索引与管理问题。
**设计理念**：
*   **实用主义**：不追求大而全的功能，聚焦于“存得进、找得到”。
*   **数据主权**：以本地存储为主，网络资源为辅，数据掌握在用户手中。
*   **分布式联动**：支持单一用户在多台设备间无缝切换，元数据实时同步。

## 2. 用户角色分析 (User Roles)
基于MVP策略，系统当前仅支持单一用户角色，但数据库设计需保留用户实体以便未来扩展。

| 角色 | 职责描述 | 典型操作 |
| :--- | :--- | :--- |
| **当前：所有者 (Owner)** | 唯一的系统使用者 | 录入资源、建立文件夹层级、多设备同步、修改本地路径 |
| *未来：多用户扩展* | *（预留实体）* | *（暂不实现：家庭共享、访客访问等）* |

## 3. 功能性需求 (Functional Requirements)

### 3.1 媒体资源录入与管理 (Resource Management)
系统需支持灵活的资源录入，不仅是文件，更是“信息索引”。

*   **本地资源录入**：
    *   记录文件名称、**存储类型**（本地文件）。
    *   记录文件在当前设备上的**绝对路径**。
    *   支持在不同设备上修改同一资源的本地路径（如：台式机在 `D:\Movies`，笔记本在 `C:\Users\Movies`）。
*   **网络资源录入**：
    *   **公共资源**：记录标准 URL（如 B站视频链接）。
    *   **私有/复杂资源**：对于非直接访问的资源（如需要登录的网课、内网资源），支持记录**辅助信息**：
        *   **账号信息/Web路径**：记录访问所需的账号或网站内的导航路径。
        *   **自定义提示**：用户可备注“需连接VPN”、“账号xxx”等。
        *   **资源快照**：记录资源类型、内容摘要。
*   **自定义整理 (Virtual Hierarchy)**：
    *   **虚拟文件夹**：在应用内部建立树形层级结构（文件夹/子文件夹），与物理文件系统解耦。用户可以像在资源管理器中一样整理数据库条目。
    *   **自定义元数据**：支持为每个资源添加**自定义标签**和**备注**，方便后续回忆与查找。

### 3.2 检索与可视化 (Retrieval & Visualization)
用户交互的核心是“可视化管理”与“快速定位”。

*   **可视化视图**：
    *   **文件夹视图**：默认采用类似 Windows 资源管理器的层级视图，直观展示用户整理的虚拟目录。
    *   **设备视图**：查看特定设备（如“我的手机”）上存储了哪些资源。
*   **混合搜索**：
    *   支持多维度组合搜索：
        *   **基本属性**：名称、创建时间、资源类型（视频/文档/网页）。
        *   **自定义属性**：标签、备注内容。
        *   **位置属性**：存储设备（如“只看笔记本上的”）、来源平台（如“B站”）。

### 3.3 分布式同步 (Distributed Sync)
实现“单人多机”的无缝体验，基于家庭 WiFi/局域网环境。

*   **设备管理**：
    *   用户可注册多台设备（如“书房台式机”、“随身Surface”、“手机”）。
*   **元数据同步**：
    *   各设备间的数据库记录（标题、标签、文件夹结构）保持实时或定期一致。
    *   *场景*：在台式机上整理好的文件夹结构，打开笔记本能立刻看到。
*   **按需文件传输**：
    *   不强制全量同步文件。
    *   当用户在设备 B 访问存储在设备 A 的文件时，支持通过局域网请求下载/流式传输。

## 4. 非功能性需求 (Non-functional Requirements)

### 4.1 易用性 (Usability)
*   **界面直观**：UI 交互逻辑应贴近原生文件管理器，降低学习成本。
*   **灵活兼容**：能够处理各种非标准网络资源记录（不仅仅是 HTTP 链接）。

### 4.2 性能与成本 (Performance & Cost)
*   **轻量级**：客户端启动迅速，资源占用低。
*   **低延迟**：局域网内元数据同步延迟 < 3秒。

### 4.3 可扩展性 (Extensibility)
*   **用户实体预留**：虽然目前是单用户，但数据库设计中需包含 `User` 表，所有资源关联至 `User ID`，为未来多用户功能铺路。
*   **功能预留**：加密、去重等功能在数据库字段上预留位置（如 `content_hash`），但MVP阶段不编写具体逻辑。

## 5. 需求优先级排序 (MoSCoW)

*   **Must have (必须有 - MVP核心)**：
    *   本地文件路径记录与管理。
    *   网络资源（URL及自定义备注）录入。
    *   虚拟文件夹层级整理。
    *   多维度基础搜索（名称/标签/设备）。
    *   局域网内多设备元数据同步。
*   **Should have (应该有)**：
    *   局域网内文件按需传输。
    *   不同设备对同一资源路径的独立映射。
*   **Could have (可以有 - 后续迭代)**：
    *   文件内容哈希去重。
    *   本地文件加密存储。
    *   多用户权限系统。
*   **Won't have (本次不做)**：
    *   公有云同步。
    *   复杂的在线转码服务。
